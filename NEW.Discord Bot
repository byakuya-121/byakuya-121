import discord 
from discord.ext import commands 

TOKEN = 'TOKENæŒ¿å…¥'


intents = discord.Intents.default()
intents.message_content = True
bot = commands.Bot(command_prefix='$', intents=intents)
intents.members = True # ãƒ¡ãƒ³ãƒãƒ¼é–¢é€£ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’æœ‰åŠ¹ã«ã™ã‚‹
@bot.event
async def on_ready():
    print("ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸï¼")
    await bot.change_presence(activity=discord.Game(name="Amau-ğŸ€Botèµ·å‹•ä¸­!!"))
    
    
@bot.event 
async def on_member_join(member): # æ–°è¦ãƒ¡ãƒ³ãƒãƒ¼ãŒå‚åŠ ã—ãŸã¨ãã®æŒ¨æ‹¶ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ 
    channel = member.guild.system_channel # ã‚µãƒ¼ãƒãƒ¼ã®ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ£ãƒ³ãƒãƒ«ã‚’å–å¾— 
    if channel is not None: embed = discord.Embed(title="Amau-é›‘è«‡é¯–ã«æ–°ã—ã„ãƒ¡ãƒ³ãƒãƒ¼ãŒå‚åŠ ã—ã¾ã—ãŸï¼", description=f"ã‚ˆã†ã“ã! {member.mention} ã•ã‚“ï¼ ï¼ƒèªè¨¼ã§ãƒ¡ãƒ³ãƒãƒ¼ãƒ­ãƒ¼ãƒ«ã‚’è²°ã£ã¦ã­!!", color=0x00ff00) 
    embed.add_field(name="åå‰", value=member.name, inline=True) 
    embed.add_field(name="ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒŸãƒãƒ¼ã‚¿", value=f"#{member.discriminator}", inline=True) 
    embed.add_field(name="ãƒ¦ãƒ¼ã‚¶ãƒ¼ID", value=member.id, inline=True) 
    embed.add_field(name="ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆæ—¥", value=member.created_at.strftime("%Y-%m-%d %H:%M:%S"), inline=True)
    await channel.send(embed=embed)

@bot.command()
async def ping(ctx):
    raw_ping = bot.latency
    ping = round(raw_ping * 1000)
    await ctx.reply(f"Pingã®æ¤œè¨¼çµæœ!\nBotã®Pingå€¤ã¯{ping}msã§ã™ã€‚")

@bot.command(pass_content=True)
@commands.has_permissions(administrator=True)
async def nick(ctx, member: discord.Member, nick):
  await member.edit(nick=nick)
  embed = discord.Embed(title="ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’å¤‰æ›´ã—ã¾ã—ãŸ",description=f"å¤‰æ›´ã•ã‚ŒãŸäººç‰©: {member.mention}",color=0xffffff)
  await ctx.send(embed=embed)

@bot.command()
async def serverinfo(ctx):
  guild = ctx.message.guild
  roles =[role for role in guild.roles]
  text_channels = [text_channels for text_channels in guild.text_channels]
  embed = discord.Embed(title=f"{guild.name}info",color=0x3683ff)
  embed.add_field(name="ç®¡ç†è€…",value=f"{ctx.guild.owner}",inline=False)
  embed.add_field(name="ID",value=f"{ctx.guild.id}",inline=False)
  embed.add_field(name="ãƒãƒ£ãƒ³ãƒãƒ«æ•°",value=f"{len(text_channels)}",inline=False)
  embed.add_field(name="ãƒ­ãƒ¼ãƒ«æ•°",value=f"{len(roles)}",inline=False)
  embed.add_field(name="ã‚µãƒ¼ãƒãƒ¼ãƒ–ãƒ¼ã‚¹ã‚¿ãƒ¼",value=f"{guild.premium_subscription_count}",inline=False)
  embed.add_field(name="ãƒ¡ãƒ³ãƒãƒ¼æ•°",value=f"{guild.member_count}",inline=False)
  embed.add_field(name="ã‚µãƒ¼ãƒãƒ¼è¨­ç«‹æ—¥",value=f"{guild.created_at}",inline=False)
  embed.set_footer(text=f"å®Ÿè¡Œè€… : {ctx.author} ")
  await ctx.send(embed=embed)

@bot.command()
async def userinfo(ctx):
  embed = discord.Embed(title=f"user {ctx.author.name}",description="userinfo",color=0x3683ff)
  embed.add_field(name="åå‰",value=f"{ctx.author.mention}",inline=False)
  embed.add_field(name="ID",value=f"{ctx.author.id}",inline=False)
  embed.add_field(name="ACTIVITY",value=f"{ctx.author.activity}",inline=False)
  embed.add_field(name="TOP_ROLE",value=f"{ctx.author.top_role}",inline=False)
  embed.add_field(name="discriminator",value=f"#{ctx.author.discriminator}",inline=False)
  embed.add_field(name="ã‚µãƒ¼ãƒãƒ¼å‚åŠ ",value=f"{ctx.author.joined_at.strftime('%d.%m.%Y, %H:%M Uhr')}",inline=False)
  embed.add_field(name="ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ",value=f"{ctx.author.created_at.strftime('%d.%m.%Y, %H:%M Uhr')}",inline=False)
  embed.set_thumbnail(url=f"{ctx.author.avatar.url}")
  embed.set_footer(text=f"å®Ÿè¡Œè€… : {ctx.author} ")
  await ctx.send(embed=embed)


@bot.command()
async def button(ctx):
    view = Button()
    await ctx.send(view=view)

class Button(discord.ui.View):
    def __init__(self):
        super().__init__()
        self.value = None
        
    @discord.ui.button(label="æŒ¨æ‹¶ğŸ—£ï¸", style=discord.ButtonStyle.grey)
    async def button1(self, button: discord.ui.Button, interaction: discord.Interaction):
        await interaction.response.send_message("ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚ç§ã¯Amau-ğŸ€Botã¨ç”³ã—ã¾ã™ã€‚ä»¥å¾Œã€ãŠè¦‹çŸ¥ã‚ŠãŠãã‚’!!")
    @discord.ui.button(label="ãƒœã‚¿ãƒ³2", style=discord.ButtonStyle.blurple)
    async def button2(self, button: discord.ui.Button, interaction: discord.Interaction):
        await interaction.response.send_message("ãƒœã‚¿ãƒ³2ãŒæŠ¼ã•ã‚Œã¾ã—ãŸï¼")
    @discord.ui.button(label="ãƒœã‚¿ãƒ³3", style=discord.ButtonStyle.green)
    async def button3(self, button: discord.ui.Button, interaction: discord.Interaction):
        await interaction.response.send_message("ãƒœã‚¿ãƒ³3ãŒæŠ¼ã•ã‚Œã¾ã—ãŸï¼")
    @discord.ui.button(label="ãƒœã‚¿ãƒ³4", style=discord.ButtonStyle.red)
    async def button4(self, button: discord.ui.Button, interaction: discord.Interaction):
        await interaction.response.send_message("ãƒœã‚¿ãƒ³4ãŒæŠ¼ã•ã‚Œã¾ã—ãŸï¼")
    


"""
@bot.command()
async def oumu(message):
    if message.author == bot.user:
        return

    # ç°¡å˜ãªã‚ªã‚¦ãƒ è¿”ã—
    if message.content:
        await message.channel.send(message.content)
"""



bot.run('TOKEN')
